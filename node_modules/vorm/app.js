const vorm = require("./vorm");
const log = console.log;
const json = what => log(JSON.stringify(what));

const orm = vorm("mysql");
orm.source({ host: "127.0.0.1", port: 3306, user: "root", password: "" });
orm.pool(1);

orm.define("users", {
rows: [
["id", { type: orm.int(), increment: true, "null": false }],
["user", {type:orm.string(40),"null": false }],
["password",{type:orm.string(60),"null":false }],],
key: "id", database: "users",
extends: ["ddt"]
})

orm.users.extend({
"ddt": async ddt => {
let chain = await orm.users.chain();
let results = await(

/* chain.update("users")
.set({ user: "michael" })
.where({
user: { is: "0"},
})
.or({ user: { is: "Aye man" }})
.sync()

*/

/*
chain.insert().into("users")
.columns("user,password")
.values(["michael-codesjs", "1234"])
.sync() */

chain.select("user",true).from("users")
.order(["id"])
.sync()
);
chain.free();
return results;
}
})

orm.users.ddt().then(log,log);

// orm.users.select("now()").sync().then(log,log);

/* orm.drop("users", "users").then(log, log);
orm.users.table("users").then(log,log); */

/* orm.users.select("now()")
.then((results) => {
    log("Aye");
    log(results);
})
.catch(e => log(e)); */
